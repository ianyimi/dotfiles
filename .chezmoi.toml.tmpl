{{- $bwEmail := "" -}}
{{- $bwServer := "" -}}
{{- $githubUsername := "" -}}

{{- if stdinIsATTY -}}
{{- $bwEmail = promptString "Bitwarden email" (default "" .bwEmail) -}}
{{- $bwServer = promptString "Bitwarden server URL (e.g., https://vault.example.com)" (default "" .bwServer) -}}
{{- $githubUsername = promptString "GitHub username" (default "" .githubUsername) -}}
{{- else -}}
{{- $bwEmail = env "BITWARDEN_EMAIL" -}}
{{- $bwServer = env "BITWARDEN_SERVER" -}}
{{- $githubUsername = env "GITHUB_USERNAME" -}}
{{- end -}}

[data]
    bwEmail = {{ $bwEmail | quote }}
    bwServer = {{ $bwServer | quote }}
    githubUsername = {{ $githubUsername | quote }}

[bitwarden]
    command = "bw"
